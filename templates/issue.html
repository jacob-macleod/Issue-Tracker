<html>
<header><title>{{title}}</title></header>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;500&display=swap" rel="stylesheet">
<style>
    body {
        background-color: #f0f0f3;
    }

    .grid-container {
    display: grid;
    grid-template-columns: auto auto auto;
    padding: 10px;
    }

    .seperator {
        position: absolute;
    width: 11px;
    height: 100vh;
    left: 25vh;
    top: 0px;

    background: #F0F0F3;
    opacity: 0.5;
    box-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3), -1px -1px 2px rgba(185, 185, 187, 0.5), inset -5px 5px 10px rgba(185, 185, 187, 0.2), inset 5px -5px 10px rgba(185, 185, 187, 0.2), inset -5px -5px 10px rgba(255, 255, 255, 0.9), inset 5px 5px 13px rgba(185, 185, 187, 0.9);
    grid-column-start: 3;
    grid-column-end: 4;
    }

    .issue_panel {
    grid-column-start: 2;
    grid-column-end: 10;
    }

    .app_name {
        position: absolute;
        width: 175px;
        height: 33.73px;
        left: 16px;
        top: 16px;
        padding: 10px;

        /* Neu-basic-white */

        background: #F0F0F3;
        box-shadow: -10px -10px 30px #FFFFFF, 10px 10px 30px rgba(174, 174, 192, 0.4);
        border-radius: 98px;
    }

    .app_name_text {
        top: 26px;
        text-align: right;
        padding-top: 10px;
        padding-left: 25px;

        font-family: Rubik;
        font-style: normal;
        font-weight: 500;
        font-size: 20px;
        line-height: 14px;
        display: flex;
        align-items: center;

        /* text-primary */

        color: #728AB7;
    }

    .create_issue_image {
        padding-top: 7vh;
        width: 20vh;
        cursor: pointer;
    }

    .delete_issue_image {
        padding-top: 1vh;
        width: 20vh;
        cursor: pointer;
    }

    .view_issue_image {
        padding-top: 1vh;
        width: 20vh;
        cursor: pointer;
    }

    .issue_title {
        position: absolute;
        width: 92px;
        height: 24px;
        padding-left: 35px;

        font-family: Rubik;
        font-style: normal;
        font-weight: 500;
        font-size: 20px;
        line-height: 14px;
        display: flex;
        align-items: center;

        /* text-primary */

        color: #728AB7;
        position: absolute;
        width: 145px;
        height: 34px;

        /* Neu-basic-white */

        background: #F0F0F3;
        box-shadow: -10px -10px 30px #FFFFFF, 10px 10px 30px rgba(174, 174, 192, 0.4);
        border-radius: 98px;
}

    .issue_description {
        position: absolute;
        width: 39vh;

        font-family: Rubik;
        font-style: normal;
        font-weight: normal;
        font-size: 14px;
        line-height: 12px;
        /* identical to box height */

        display: flex;
        align-items: center;

        /* Gray 1 */

        color: #333333;
    }

    .issue_tags {
        position: absolute;

        font-family: Rubik;
        font-style: normal;
        font-weight: normal;
        font-size: 14px;
        line-height: 100%;
        /* identical to box height, or 10px */

        letter-spacing: 0.01em;

        color: #FB7575;
    }

    .back_button_image {
            width: 20vh;
            cursor: pointer;
    }

    .outer_div {
        height: 3vh;
        width: 40vh;

        /* Neu-basic-white */

        background: #F0F0F3;
        box-shadow: -1px -1px 3px #FFFFFF, 1.5px 1.5px 3px rgba(174, 174, 192, 0.4);
        border-radius: 12px;
    }

    .inner_div {
        height: 3vh;
        width: 40vh;

        /* Nue-basic-white-2 */

        background: #EEEEEE;
        box-shadow: inset -1px -1px 1px rgba(255, 255, 255, 0.7), inset 1px 1px 2px rgba(174, 174, 192, 0.2);
        border-radius: 12px;
    }

    .label {
        border: none !important;
        background: #F0F0F3;
        width: 39vh;
        margin-top: 5px;
        margin-left: 5px;

        font-family: Rubik;
        font-style: italic;
        font-weight: 300;
        font-size: 14px;
        line-height: 100%;

        /* or 12px */

        letter-spacing: 0.02em;

        color: #030303;
    }

    .note_item {
        position: absolute;
        width: 40vh;

        font-family: Rubik;
        font-style: normal;
        font-weight: normal;
        font-size: 14px;
        line-height: 100%;
        /* or 10px */

        letter-spacing: 0.01em;

        color: #696969;
    }

    .issue_settings {
        grid-column-start: 10;
        grid-column-end: 20;
    }

    .assign_button {
        width: 20vh;
        cursor: pointer;
    }


    .issue_status_button {
        width: 4vh;
        cursor: pointer;
        float: left;
    }

    .issue_status_text {
        text-align: right;

        font-family: Rubik;
        font-style: normal;
        font-weight: 500;
        font-size: 14px;
        line-height: 14px;
        display: flex;
        float: left;

        /* text-primary */

        color: #728AB7;
    }
</style>
<body>
    <div class="grid-container">
        <div class="panel_items">
            <div class="app_name">
                <div class="app_name_text">Issue Tracker</div>
            </div> 
            <img src="{{url_for('static', filename='create_issue_img.png')}}" class="create_issue_image" onclick="window.open('http://localhost:5000/create_issue','_self')">
            <br>
            <img src="{{url_for('static', filename='delete_issue_img.png')}}" class="delete_issue_image" onclick="window.open('http://localhost:5000/delete_issue','_self')">
            <br>
            <img src="{{url_for('static', filename='view_issue_img.png')}}" class="view_issue_image" onclick="alert('Please click on an issue first to view it!')">
        </div>
        <div class="seperator">
        </div>
        <div class="issue_panel">
            <div class="issue_title">{{ title }}</div>
            <br>
            <br>
            <br>
            <p class="issue_tags">{{ tags }}</p>
            <br>
            <br>
            <br>
            <div class="issue_description">{{ desc }}</div>
            <br>
            <div id="note_container"></div>
            <br>
            <br>
            <br>
            <form method="post"> 
                <div class="outer_div">
                    <div class="inner_div">
                        <input type="text" id="note" name="note_name" class="label" placeholder="Please write a note here then click the back button!"> 
                    </div>
                </div>
            </form>
            <br>
            <img src="{{url_for('static', filename='back_button_img.png')}}" class="back_button_image" onclick="window.open('http://localhost:5000/', 'self')">
            </div>
            <div class="issue_settings">
                <div id="people_container"></div>
                <br>
                <div class="outer_div">
                    <div class="inner_div">
                        <input type="text" id="person" name="person_name" class="label" placeholder="Please type someone's name then click the back button!"> 
                    </div>
                </div>
                <br>
                <img src="{{url_for('static', filename='AssignPerson.png')}}" class="assign_button" onclick="assign_person()">
                <!--<button onclick="assign_person()">Assign</button>-->
                <br>
                <br>
                <img src="{{url_for('static', filename='OpenCloseIssue.png')}}" class="issue_status_button" onclick="change_issue_status()">
                <p class="issue_status_text" id="issue_status_button"></p>
                <!--<button id="issue_status_button" onclick="change_issue_status()"></button> -->
            </div>
        </div>   
</body>
<script>
//Passed from flask
notes = "{{ notes }}"
people = "{{ people }}"
status = "{{ status }}"

document.cookie = "person='%noneValue%'"
document.cookie = "issue_status=%noneValue%"

if (status=="Close") {
    issue_status_button.innerHTML = "Open Issue"
} else {
    issue_status_button.innerHTML = "Close Issue"
}

issue_status_button = document.getElementById("issue_status_button").innerHTML


function change_issue_status() {
    alert("You'll need to reload the page to see any changes!")
    if (issue_status_button=="Open Issue") {
        document.cookie = "issue_status=Open"
    } else {
    document.cookie = "issue_status=Close";
    }
    window.open('http://localhost:5000/issue','_self')
}

function assign_person() {
    person = document.getElementById("person").value
    document.cookie = "person='" + person + "'";
    window.open('http://localhost:5000/issue','_self')
}


notes = notes.split("newlineToken")
people = people.split("newlineToken")

note_container = document.getElementById(note_container)
for (let i = 0; i < notes.length; i++) {
    var note_item = document.createElement('p');
    note_item.textContent = notes[i]
    note_item.classList.add("note_item")
    var line_break = document.createElement('br');
    document.getElementById("note_container").appendChild(note_item)
    document.getElementById("note_container").appendChild(line_break)
}

for (let i = 0; i < people.length; i++) {
    if (people[i] != "") {
        var person = document.createElement('p');
        person.textContent = people[i]
        person.classList.add("note_item")
        var line_break = document.createElement('br');
        document.getElementById("people_container").appendChild(person)
        document.getElementById("people_container").appendChild(line_break)
    }
}

</script>
</html>